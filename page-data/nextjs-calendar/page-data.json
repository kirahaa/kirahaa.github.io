{"componentChunkName":"component---src-templates-blog-post-js","path":"/nextjs-calendar/","result":{"data":{"site":{"siteMetadata":{"title":"Kirahaa"}},"markdownRemark":{"id":"2bc9f419-ae79-57ad-b7c6-833f6c136546","excerpt":"얼마전 기업 기술 과제로 캘린더 컴포넌트를 만들었던 경험이 있었는데,\n만들면서 꽤나 배운 점들이 많아서 기록해 보려고 합니다. 한 번 만들어봤다고 해도, 따로 정리나 기록을 해놓지 않으면 나중에 생각했을 때 남는 점이 없는 것 같아요.\n(만든지 일주일됐는데 벌써 가물가물한…","html":"<p>얼마전 기업 기술 과제로 캘린더 컴포넌트를 만들었던 경험이 있었는데,\n만들면서 꽤나 배운 점들이 많아서 기록해 보려고 합니다.</p>\n<p>한 번 만들어봤다고 해도, 따로 정리나 기록을 해놓지 않으면 나중에 생각했을 때 남는 점이 없는 것 같아요.\n(만든지 일주일됐는데 벌써 가물가물한 1인..😮‍💨)</p>\n<p>그런 의미에서 나중의 '나 자신'을 위해 잘 기록해 보려고 합니다. 레츠꼬~!</p>\n<hr>\n<h2>요구사항</h2>\n<p>캘린더 컴포넌트 구현의 요구 사항은 다음과 같았습니다.</p>\n<blockquote>\n<p>이 컴포넌트는 사용자가 시작일과 종료일을 선택하고, 선택한 날짜를 표시할 수 있는 기능을 포함합니다.</p>\n<ul>\n<li>캘린더는 전달과 다음달로만 이동할 수 있어야 합니다.</li>\n<li>사용자는 캘린더에서 두 개의 날짜를 선택할 수 있어야 합니다.</li>\n<li>사용자가 선택한 두 날짜를 별도로 표시하는 영역이 있어야 합니다.</li>\n</ul>\n</blockquote>\n<p>전달과 다음달로만 이동할 수 있어야 한다는 요구사항이 있어서 오히려 다행이라고 느껴졌어요ㅎㅎ\n만약 다른 달을 선택할 수 있도록 해야하면 추가 로직이 필요해질테니까요..!</p>\n<h3>컴포넌트 구조</h3>\n<p>먼저 캘린더의 컴포넌트 구조를 기능별로 나누어 다음과 같이 구성해보았습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a4245c896182a657366ca78cd5cccfc2/8cdd0/calendar_structure.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.16455696202532%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACVklEQVR42m2Q60tTYRyA9y/1pahIS8sgiC4I0aegwsz71JAyK4LAMnP2IQLp4gcJ0vqQWGFU5jana26ZLnW3s53dzsXOcmcXrOCJc+aUqA8P73leOA+/32vRdR2DbDaLoiisra1tus7vjQKzSzJ1ffM02Xw0DvjMs3toieuP/Vt3zTYfZ3s9jDuTWMoR41xeXiYUCqGqKoqqkstqOBfSnL/t4WL/PPV3S3Q++ELXw4Utb+j3cuaWm1f2BBZZlslkMmZU0zTz2whKkkw+q/Hek+RIl5MTV10c7y5x9PKMSdlP9sxS0+Fg5F3MmFAmEFjFCJeRJIlUSiL7Q+WNK87epk9UWe0caCtR2TpNZeu2V7c72HnhI48mIlhisRjDw8PmqtFoFEEQTEKhMFIqZgYrWuwc6nBwsN1BtdVhTnfsissMGXc1nU52N0zx5LWAxfg5kUggCgJRg2gUURQRxTiqFP8raFDVZqf22hynb3424/8Eg8EgkXCYcDJJJBrFmNjr9TL24iUFPcNbV9xcsabTsR212k3KfviSkz2NUzw1glI6TVqWWR8bQ1pZQdU04qLI18UlNgrr/33DKqvD5L9vaKwoyTLa5CSqICAmEqRSKRRFJfNdwbUo0XjPS9ugj9ZNmm1ek7Jb7/uou+NhYiaJxW6f5pvfTzCdIilJeD3zzLndBIMhlLTIhDPGrvopKpqn2ddUorZnjlM33Fu+v8XOjnMfGBqPYCnk8+RyOfK6Tj6fp1gsmq7ncvz6WcQf0eh7torteYCBTQZHgyZlt40G6B1Zwbmo8gcV66xGLZz0QgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"캘린더 구조\"\n        title=\"\"\n        src=\"/static/a4245c896182a657366ca78cd5cccfc2/984b6/calendar_structure.png\"\n        srcset=\"/static/a4245c896182a657366ca78cd5cccfc2/4d6f2/calendar_structure.png 158w,\n/static/a4245c896182a657366ca78cd5cccfc2/3c1ae/calendar_structure.png 315w,\n/static/a4245c896182a657366ca78cd5cccfc2/984b6/calendar_structure.png 630w,\n/static/a4245c896182a657366ca78cd5cccfc2/e7d8e/calendar_structure.png 945w,\n/static/a4245c896182a657366ca78cd5cccfc2/58c38/calendar_structure.png 1260w,\n/static/a4245c896182a657366ca78cd5cccfc2/8cdd0/calendar_structure.png 1304w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>Header</strong>: 해당 년도와 달 표시, 전달과 다음달로 이동할 수 있는 버튼</p>\n<p><strong>Body</strong>: 날짜를 선택할 수 있는 영역</p>\n<p><strong>Footer</strong>: 선택된 날짜가 표시되는 영역</p>\n<deckgo-highlight-code   >\n          <code slot=\"code\">// components/Calendar/index.tsx\nconst Calendar = () =&gt; {\n  const {\n    currentDate,\n    currentMonthDates,\n    todayDate,\n    startDate,\n    setStartDate,\n    endDate,\n    setEndDate,\n    prevMonth,\n    nextMonth,\n    prevMonthDates,\n    nextMonthDates\n  } = useCalendar()\n\n  return (\n    &lt;CalendarCell&gt;\n      &lt;CalendarHeader\n        currentMonth={currentDate}\n        prevMonth={prevMonth}\n        nextMonth={nextMonth}\n      /&gt;\n      &lt;CalendarBody\n        currentMonthDates={currentMonthDates()}\n        prevMonthDates={prevMonthDates()}\n        nextMonthDates={nextMonthDates()}\n        todayDate={todayDate()}\n        startDate={startDate}\n        setStartDate={setStartDate}\n        endDate={endDate}\n        setEndDate={setEndDate}\n      /&gt;\n      &lt;CalendarFooter\n        startDate={startDate}\n        endDate={endDate}\n      /&gt;\n    &lt;/CalendarCell&gt;\n  )\n}\nexport default Calendar;</code>\n        </deckgo-highlight-code>\n<p>미리 스포를 해보자면, 최종 캘린더 컴포넌트 구조는 위와 같습니다.</p>\n<p>데이터와 UI적인 요소를 분리하기 위해 데이터 관련 로직은 useCalendar 훅을 만들었습니다.</p>\n<h3>날짜 라이브러리 date-fns</h3>\n<p>date-fns는 Javascript와 Typescript는 날짜 관련 유틸리티 라이브러리입니다.\n날짜를 다루는 다양한 함수들을 제공하여 날짜 및 시간 관련 작업을 쉽게 처리할 수 있도록 도와주는 라이브러리라고 하네요.\n구현 과정에서 유틸리티성 라이브러리는 자유롭게 사용이 가능하다하여 빠른 작업을 위해 date-fns 라이브러리를 사용해 주었습니다.</p>\n<h3>구현</h3>\n<p>캘린더는 아래의 기준으로 구현하였습니다.</p>\n<ol>\n<li>일요일이 첫 번째 요일로 시작한다.</li>\n<li>캘린더가 꽉 찰 수 있도록 전달의 마지막 주의 날짜와 다음달의 첫 번째 주의 날짜도 표시한다.</li>\n</ol>\n<p>이를 구현하기 위해서 date-fns에서 다음의 메서드들을 가져와 사용하였습니다.</p>\n<h4>format()</h4>\n<p><code>format()</code> 함수를 사용하여 날짜 및 시간을 원하는 형태의 문자열로 변경할 수 있습니다.</p>\n<deckgo-highlight-code   >\n          <code slot=\"code\">import { format } from &quot;date-fns&quot;\n\nlet date = new Date();\nconsole.log(date); // Tue Aug 15 2023 00:00:00 GMT+0900 (한국 표준시)\nconsole.log(format(date, &quot;yyyy-MM-d&quot;)) // 2023-08-15\nconsole.log(format(date, &quot;yyyy/MM/d&quot;)) // 2023/08/15\nconsole.log(format(date, &quot;Y&quot;)) // 2023\nconsole.log(format(date, &quot;M&quot;)) // 8\nconsole.log(format(date, &quot;d&quot;)) // 15</code>\n        </deckgo-highlight-code>\n<p>저는 현재 달의 년도와 월을 가져오기 위해 다음과 같이 사용해주었습니다.</p>\n<deckgo-highlight-code   >\n          <code slot=\"code\">const CalendarHeader = ({\n    currentMonth,\n    prevMonth,\n    nextMonth\n  }: CalendarHeaderProps ) =&gt; {\n  return (\n    &lt;HeaderCell&gt;\n      &lt;button onClick={prevMonth}&gt;&lt;MdKeyboardArrowLeft size={30}/&gt;&lt;/button&gt;\n      &lt;span&gt;\n        {format(currentMonth, &quot;yyyy&quot;)}년{&#39; &#39;}\n        {format(currentMonth, &quot;M&quot;)}월\n      &lt;/span&gt;\n      &lt;button onClick={nextMonth}&gt;&lt;MdKeyboardArrowRight size={30}/&gt;&lt;/button&gt;\n    &lt;/HeaderCell&gt;\n  )\n}\nexport default CalendarHeader;</code>\n        </deckgo-highlight-code>\n<h4>subMonths(), addMonths()</h4>\n<p>주어진 날짜를 기준으로 연도나 월을 증감시켜주기 위해 subMonths(), addMonths() 메서드를 사용하였습니다.</p>\n<deckgo-highlight-code   >\n          <code slot=\"code\">const [currentDate, setCurrentDate] = useState(new Date())\n\nconst prevMonth = () =&gt; {\n    setCurrentDate(subMonths(currentDate, 1))\n}\nconst nextMonth = () =&gt; {\n    setCurrentDate(addMonths(currentDate, 1))\n}</code>\n        </deckgo-highlight-code>\n<h4>getYear(), getMonth()</h4>\n<p>해당 달의 첫째 날과 마지막 날을 가져오기 위해 사용하였습니다.\n이는 달력에 표시할 날짜 범위를 정하는 데 사용됩니다.</p>\n<deckgo-highlight-code   >\n          <code slot=\"code\">const firstDayOfMonth = () =&gt; {\n    return new Date(getYear(currentDate), getMonth(currentDate, 1)\n}\n\nconst lastDayOfMonth = () =&gt; {\n    return new Date(getYear(currentDate), getMonth(currentDate) + 1, 0)\n}</code>\n        </deckgo-highlight-code>\n<h4>eachDayOfInterval()</h4>\n<p>달력에 날짜를 표시하기 위해 계산한 기간 동안의 모든 날짜를 배열로 가져오기 위해 사용하였습니다.</p>\n<deckgo-highlight-code   >\n          <code slot=\"code\">const currentMonthDates = () =&gt; {\n    return eachDayOfInterval({\n        start: firstDayOfMonth(),\n        end: lastDayOfMonth()\n    })\n}</code>\n        </deckgo-highlight-code>\n<h4>startOfWeek(), subDays(), addDays(), endOfWeek()</h4>\n<p>주어진 날짜를 기준으로 전달과 다음달의 날짜를 배열로 가져오기 위해 사용하였습니다.</p>\n<deckgo-highlight-code   >\n          <code slot=\"code\">const prevMonthDates = () =&gt; {\n    const startDate = startOfWeek(firstDayOfMonth())\n    const endDate = subDays(firstDayOfMonth(), 1)\n    \n    if (startDate &gt; endDate) {\n        return []\n    }\n    \n    return eachDayOfInterval({\n        start: startDate,\n        end: endDate\n    })\n}\n\nconst NextMonthDates = () =&gt; {\n    const startDate = addDays(lastDayOfMonth(), 1)\n    const endDate = endOfWeek(lasyDayOfMonth())\n    \n    if (startDate &gt; endDate) {\n        return []\n    }\n    \n    return eachDayOfInterval({\n        start: startDate, \n        end: endDate\n    })\n}</code>\n        </deckgo-highlight-code>\n<h4>view 구현</h4>\n<p>메서드를 조합하여 <code>useCalendar</code> 훅으로 만들고 구현하였습니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/10c750cf0453d87d53f09b434ce03d9f/9708d/calendar.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 122.78481012658229%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAABYlAAAWJQFJUiTwAAACgklEQVR42qWVy24aUQyGeZL2OdvXQYqEsgiCIrFCSEhZpt0gwmWAGS6BgQEGcU+Iq8/UaC6QTUcyx/j4/LZ/+8xk5Mbz+fmp62KxkOl0KrPZTFarlfi+L8fjUb56MreM5/NZ13q9LrlcTh4eHiSfz0s2mxXP82JBbwKeTqeUvL+/y+Fw0JUAHx8fqiP3/BUQZ0pLynw+lyAIZDwei+u6Kuhmj/ryPwzD+4DL5VImk4ny9/LyItVqVSqViurwiB2f6BkAoSFDKRgg3jJD5wCHWRGawmp7rGSGcCYGiIPjOApIWb1eT23dbldto9FIwQFhj8NQwH8qGQ6Hsl6vL4BWcpKXJEe2H11Nj2VogESy0q18uDKbNePt7U3Lt6yxMUqpDKMkm55cTQckaSNIjEMisklUyxZurONkiGCjPPzJHH/4vGZoXbbyrMtJm/E2mU40CHsWBBrujo3xlRylqC05NuipsYFYK5NyomODzW4J40V57EEFYDebAqlGsBFO1Fs2u2rRoU81pdPpXLNBFkEgndfXWIYA4cdhMoRHBD3WFOvkhaO5zHxfFuu1jMkwDC+8/uMLP2uKXTtsqcGmUzo2RF0uJfzzWw4/f8iq1ZJpEKjd/KKjZEFSgJSC48B1xQsC2f4qyvn7N9k8P0uP++p5erjdbuth7rSNTmwOATSSoyPis7qu+JFbAXf42ZWzmWW9NoUfCC+Xy1Kr1aTf72u2jIfjeaoDQGOenp7SPo6jOsD6ggWQlAuFgpRKJWk0Ghendls6rZaWCOBgMJDHx0cpFovSbDavQAg+V0BKtvuLkG1SlIIvfOw9cM1wv9/LdrtV2e12d2Wz2dz0wcYH7e5n9H+evy76XV/apPwwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"calendar\"\n        title=\"\"\n        src=\"/static/10c750cf0453d87d53f09b434ce03d9f/984b6/calendar.png\"\n        srcset=\"/static/10c750cf0453d87d53f09b434ce03d9f/4d6f2/calendar.png 158w,\n/static/10c750cf0453d87d53f09b434ce03d9f/3c1ae/calendar.png 315w,\n/static/10c750cf0453d87d53f09b434ce03d9f/984b6/calendar.png 630w,\n/static/10c750cf0453d87d53f09b434ce03d9f/e7d8e/calendar.png 945w,\n/static/10c750cf0453d87d53f09b434ce03d9f/9708d/calendar.png 1160w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<deckgo-highlight-code   >\n          <code slot=\"code\">// CalendarBody 컴포넌트\n\nconst DAYS = [&#39;일&#39;, &#39;월&#39;, &#39;화&#39;, &#39;수&#39;, &#39;목&#39;, &#39;금&#39;, &#39;토&#39;];\n\nconst CalendarBody = (\n  {\n    currentMonthDates,\n    prevMonthDates,\n    nextMonthDates,\n    todayDate,\n    startDate,\n    setStartDate,\n    endDate,\n    setEndDate\n  }: DateGridProps ) =&gt; {\n\n  const handleDateClick = (date: Date) =&gt; {\n    if (!startDate || (startDate &amp;&amp; endDate)) {\n      setStartDate(date)\n      setEndDate(null)\n    } else {\n      if (isBefore(date, startDate)) {\n        setStartDate(date)\n        setEndDate(null)\n      } else {\n        setEndDate(date)\n      }\n    }\n  }\n\n  const isDateInRange = (date: Date) =&gt; {\n    if (!startDate || !endDate) return false\n    return isBefore(date, endDate) &amp;&amp; isAfter(date, startDate)\n  }\n\n  const isStartDate = (date: Date) =&gt; startDate &amp;&amp; isSameDay(date, startDate)\n  const isEndDate = (date: Date) =&gt; endDate &amp;&amp; isSameDay(date, endDate)\n\n  return (\n    &lt;BodyCell&gt;\n      &lt;DaysCell&gt;\n        {DAYS.map((day) =&gt; (\n          &lt;DayCell key={day}&gt;{day}&lt;/DayCell&gt;\n        ))}\n      &lt;/DaysCell&gt;\n      &lt;DatesCell&gt;\n        {prevMonthDates.map((prevDate) =&gt; (\n          &lt;DateCell\n            key={prevDate.toString()}\n            notCurrentMonth\n            isInRange={isDateInRange(prevDate)}\n            isStartDate={isStartDate(prevDate)}\n            isEndDate={isEndDate(prevDate)}\n            onClick={() =&gt; handleDateClick(prevDate)}\n          &gt;\n            {getDate(prevDate)}\n          &lt;/DateCell&gt;\n        ))}\n        {currentMonthDates.map((currentDate) =&gt; (\n          &lt;DateCell\n            key={currentDate.toString()}\n            isToday={isSameDay(currentDate, todayDate)}\n            isInRange={isDateInRange(currentDate)}\n            isStartDate={isStartDate(currentDate)}\n            isEndDate={isEndDate(currentDate)}\n            onClick={() =&gt; handleDateClick(currentDate)}\n          &gt;\n            {getDate(currentDate)}\n          &lt;/DateCell&gt;\n        ))}\n        {nextMonthDates.map((nextDate) =&gt; (\n          &lt;DateCell\n            key={nextDate.toString()}\n            notCurrentMonth\n            isInRange={isDateInRange(nextDate)}\n            isStartDate={isStartDate(nextDate)}\n            isEndDate={isEndDate(nextDate)}\n            onClick={() =&gt; handleDateClick(nextDate)}\n          &gt;\n            {getDate(nextDate)}\n          &lt;/DateCell&gt;\n        ))}\n      &lt;/DatesCell&gt;\n    &lt;/BodyCell&gt;\n  )\n}\nexport default CalendarBody;</code>\n        </deckgo-highlight-code>\n<p>시작일(startDate)과 종료일(endDate)도 <code>useCalendar</code> 훅에 넣어 공통으로 관리해주었습니다.</p>\n<deckgo-highlight-code   >\n          <code slot=\"code\">export default function useCalendar() {\n  const [startDate, setStartDate] = useState&lt;null | Date&gt;(null)\n  const [endDate, setEndDate] = useState&lt;null | Date&gt;(null)\n  ...\n}</code>\n        </deckgo-highlight-code>\n<deckgo-highlight-code   >\n          <code slot=\"code\">const CalendarFooter = (\n  {\n    startDate,\n    endDate\n  }) =&gt; {\n  return (\n    &lt;FooterCell&gt;\n      &lt;DateCell&gt;\n        &lt;dt&gt;시작일&lt;/dt&gt;\n        &lt;dd&gt;{startDate ? format(startDate, &#39;yyyy-MM-dd&#39;) : &#39;날짜 입력&#39;}&lt;/dd&gt;\n      &lt;/DateCell&gt;\n      &lt;DateCell&gt;\n        &lt;dt&gt;종료일&lt;/dt&gt;\n        &lt;dd&gt;{endDate ? format(endDate, &#39;yyyy-MM-dd&#39;) : &#39;날짜 입력&#39;}&lt;/dd&gt;\n      &lt;/DateCell&gt;\n    &lt;/FooterCell&gt;\n  )\n}\nexport default CalendarFooter;</code>\n        </deckgo-highlight-code>\n<h3>마무리</h3>\n<p>다행히 date-fns가 여러 편리한 함수를 제공해줘서 단순히 이를 잘 활용하기만 하면 돼서 생각보다 금방 만들 수 있었습니다.</p>\n<p>간단하지만 오랜만에 제대로 된 컴포넌트를 만들어 본 것이었는데, 너무 즐거운 작업이었습니다~!</p>\n<p>특히 처음으로 Next.js + Typescript 환경에서 작업해봤는데, 다행히 복잡한 작업은 아니라 큰 어려움은 없었습니다.<br/>\n누군가에게 도움이 되는 글이었길 바라며, 문의사항이 있으시다면 댓글 부탁드려요😊</p>","frontmatter":{"title":"Next.js 캘린더 컴포넌트 만들기","date":"September 06, 2024","description":"Next.js + Typescript 환경에서 캘린더 컴포넌트 만들기","tags":["Next","calendar","components"]}},"previous":{"fields":{"slug":"/ssr-csr/"},"frontmatter":{"title":"클라이언트 사이드 렌더링(CSR)과 서버 사이드 렌더링(SSR)"}},"next":null},"pageContext":{"id":"2bc9f419-ae79-57ad-b7c6-833f6c136546","previousPostId":"ead19cad-726f-5c19-8759-d0fb366b8d27","nextPostId":null}},"staticQueryHashes":["1085474499","2837417301"],"slicesMap":{}}